(()=>{"use strict";class t{constructor(t=null,e=null,n=!1){if(this.isNegative=n,null!=t&&null!=e)this.hours=parseInt(t),this.minutes=parseInt(e);else{let t=new Date;this.hours=t.getHours(),this.minutes=t.getMinutes()}}static fromString(e){if(e instanceof t)return e;const[n,i]=e.trim().split(":"),s="-"===n[0];return new t(s?n.substring(1):n,i,s)}static fromTotalMinutes(e){const n=e<0;return e=Math.abs(e),new t(Math.floor(e/60),e%60,n)}getTotalMinutes(){let t=60*this.hours+this.minutes;return this.isNegative?-t:t}diff(e=null,n){let i=this.normalizeArguments(e,n);return t.fromTotalMinutes(Math.abs(i.getTotalMinutes()-this.getTotalMinutes()))}add(e=null,n=null){let i=this.normalizeArguments(e,n);return t.fromTotalMinutes(i.getTotalMinutes()+this.getTotalMinutes())}sub(e,n){let i=this.normalizeArguments(e,n);return this.add(new t(i.hours,i.minutes,!i.isNegative))}compare(t,e){let n=this.normalizeArguments(t,e);return n.isNegative!==this.isNegative?n.isNegative?1:-1:this.hours>n.hours||this.hours===n.hours&&this.minutes>n.minutes?1:this.hours===n.hours&&this.minutes===n.minutes?0:-1}normalizeArguments(e=null,n=null){return null==e&&null==n?new t:e instanceof t?e:null==n?t.fromTotalMinutes(e):new t(e,n)}toString(){return`${this.isNegative?"-":""}${this.hours}:${String(this.minutes).padStart(2,"0")}`}}class e{constructor(e,n){this.minimumBreak=t.fromString(e),this.minimumWorkday=t.fromString(n)}getSortedCheckpoints(e){return[...e].sort(((e,n)=>t.fromString(e).compare(t.fromString(n))))}breaks(e){const n=this.getSortedCheckpoints(e);if(n.length<2)return new t(0,0);let i=new t(0,0),s=null;for(let e=1;e<n.length;e++)e%2==1?s=t.fromString(n[e]):i=i.add(s.diff(t.fromString(n[e])));return i}timeSpent(e){const n=this.getSortedCheckpoints(e);return 0===n.length?new t(0,0):n.length%2==1?t.fromString(n[0]).diff(new t).diff(this.breaks(n)):t.fromString(n[0]).diff(t.fromString(n[n.length-1])).diff(this.breaks(n))}timeToGo(t){const e=this.breaks(t),n=this.timeSpent(t);return 1===this.minimumBreak.compare(e)?this.minimumWorkday.add(this.minimumBreak.diff(e)).sub(n):this.minimumWorkday.sub(n)}goTime(e){return(new t).add(this.timeToGo(e))}}window.onload=function(){setInterval((()=>{let n=function(){const n=document.querySelectorAll(".today.stempel-day .time"),i=document.querySelectorAll(".today.stempel-day .absence-type");if(!n.length)return!1;const s=[];n.forEach((t=>{"00:00"!==t.textContent&&s.push(t.textContent)}));const r=function(e){let n=0;return e.forEach((t=>{const e=t.textContent.trim().match(/(\d+):(\d+) Std./);if(e){const t=parseInt(e[1]),i=parseInt(e[2]);n+=60*t+i}})),t.fromTotalMinutes(n)}(i);let o;return o=r.getTotalMinutes()>162?new e("0:00","8:12"):new e("0:30","8:12"),[{text:"Time spent",value:o.timeSpent(s).add(r)},{text:"Time to go",value:o.timeToGo(s).sub(r)},{text:"Go Home!",value:o.goTime(s).sub(r)}]}();n&&function(t){let e=document.querySelector(".timing");e||(e=function(){const t=document.createElement("DIV");t.classList.add("row");const e=document.createElement("DIV");e.style="margin: 0 -15px 15px; background: #f4f4f4; padding: 1rem 0;",e.classList.add("timing");const n=document.createElement("P");n.classList.add("text-uppercase"),n.style="text-align: center; font-weight: bolder;",n.appendChild(document.createTextNode("Time stats")),e.appendChild(n);for(let t=0;t<3;t++){const n=document.createElement("P");n.style="display:flex; align-items: baseline;",n.classList.add(`time-${t}`),e.appendChild(n)}return t.appendChild(e),document.querySelector(".stempel-data").parentElement.insertBefore(e,document.querySelector(".stempel-data")),e}());let n=t.some((t=>t.value.isNegative));t.forEach(((t,e)=>{document.querySelector(`.time-${e}`).innerHTML=function(t,e){return`\n    <span style="flex: 1; text-align: right; padding: 0 2px; font-size: 30px;">\n      ${t.toString()}\n    </span>\n    <span style='flex: 1; text-align: left; padding: 0 2px;'>${e}</span>\n  `}(t.value,t.text)})),n?document.querySelector(".timing").classList.add("unique-light-pulse"):document.querySelector(".timing").classList.remove("unique-light-pulse")}(n)}),1e3),function(){let t=document.createElement("style");t.type="text/css",t.innerHTML="\n      @keyframes unique-light-pulse-animation {\n          from {\n              transform: scale3d(1, 1, 1);\n          }\n          50% {\n              transform: scale3d(1.05, 1.05, 1.05);\n          }\n          to {\n              transform: scale3d(1, 1, 1);\n          }\n      }\n      \n      .unique-light-pulse {\n          animation-name: unique-light-pulse-animation;\n          animation-iteration-count: infinite;\n          animation-duration: 3s;\n          animation-fill-mode: both;\n          border: 3px solid #84b2a6;\n      }\n      ",document.head.append(t)}()}})();